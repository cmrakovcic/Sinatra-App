<h1> <%= @user.email %>'s Video Game Collection</h1>

<!-- Allow user to add problem if they are on their own profile -->
<% if current_user == @user %>
  <form action="/videogames/new" method="GET">
    <button class="btn btn-outline-primary btn-lg" type="submit">Add New Video Game</button>
  </form>
<% end %>

<!-- Display all videogames -->
<h3>All Video Games:</h3>
<% if @videogames.empty? %>
  <p>Looks like <%= @user.email %> doesn't have any vidoe games!</p>
<% else %>
  <table class="table table-bordered table-striped table-hover">
    <thead class="thead-dark">
      <th>Title</th>
      <th>Date Purchased</th>
      <th></th>
      <% if current_user == @user %>
        <th></th>
        <th></th>
      <% end %>
    </thead>
    <tbody>

    <% @videogames.each do |videogame| %>
      <tr>
        <td><%= videogame.title %></td>
        <td><%= videogame.date_purchased %></td>
        <form action="/videogames/<%= videogame.id %>" method="get">
            <td><button class="btn btn-info btn-sm" type="submit">See Details</button></td>
          </form>

          <% if videogame.user == current_user %>
            <form action="/videogames/<%= videogame.id %>/edit" method="GET">
               <td>
                <button class="btn btn-primary btn-sm" type="submit">Edit Video Game</button>
              </td>
            </form>

            <form action="/videogames/<%= videogame.id %>/delete" method="POST">
              <input id="hidden" type="hidden" name="_method" value="DELETE">
              <td>
                <button type="submit" class="btn btn-sm btn-danger">Delete Video Game</button>
              </td>
            </form>
          <% else %>
            <!-- blank columns -->
            <td class="d-none"></td>
            <td class="d-none"></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>